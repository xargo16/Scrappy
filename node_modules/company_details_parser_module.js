//External modules
const Knwl = require("./knwl.js");

//variables
var knwlInstance = new Knwl('english');
var listOfCompanyDetails = [];

function getCompanyDetailsFromString(string){
  knwlInstance.init(string);

  var emailObject = knwlInstance.get('emails');
  var phonesObject = knwlInstance.get('phones');
  var placesObject = knwlInstance.get('places');

  //If there are multiple emails, phones or places in the web page then we need
  //to present all of them. We use arrays to hold multiple values
  var emailsList = [];
  var phonesList = [];
  var placesList = [];

  if(emailObject){
    emailObject.forEach(function(item){
      emailsList.push(item.address);
    });
  }
  if(phonesObject){
    phonesObject.forEach(function(item){
      phonesList.push(item.phone);
    });
  }
  if(placesObject){
    placesObject.forEach(function(item){
      placesList.push(item.place);
    });
  }

  var companyDetailsObject = {
    emails: emailsList,
    phones: phonesList,
    addresses: placesList
  };

  return companyDetailsObject;
}

module.exports = {
  getCompanyDetailsFromString: getCompanyDetailsFromString
};
